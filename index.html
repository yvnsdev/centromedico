<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carpediem - Sistema de Reservas</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="assets/favicon.png" type="image/png">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo-container">
                <img src="assets/logo.png" alt="Carpediem Logo" class="logo-img">
            </div>
            <nav class="nav" aria-label="Navegación principal">
                <!-- Hamburguesa (móvil) -->
                <button class="nav-toggle" id="navToggle" aria-expanded="false" aria-controls="navMenu">
                    <i class="fas fa-bars"></i>
                    <span class="sr-only">Menú</span>
                </button>

                <!-- Lista principal -->
                <ul class="nav-list" id="navMenu">
                    <li><a class="nav-link" href="#"><i class="fas fa-home"></i> Inicio</a></li>
                    <li><a class="nav-link" href="#about"><i class="fas fa-user"></i> Nosotros</a></li>

                    <!-- Dropdown de Servicios -->
                    <li class="dropdown">
                        <button class="dropdown-toggle nav-link" id="servicesToggle" aria-expanded="false"
                            aria-haspopup="true">
                            <i class="fas fa-concierge-bell"></i> Servicios <i class="fas fa-chevron-down"></i>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="servicesToggle">
                            <li><a class="dropdown-item" href="#services">Todos</a></li>
                            <li><a class="dropdown-item" href="#process">Proceso</a></li>
                            <li><a class="dropdown-item" href="#benefits">Beneficios</a></li>
                        </ul>
                    </li>

                    <!-- <li><a class="nav-link" href="#testimonials"><i class="fas fa-comment-dots"></i> Testimonios</a> -->
                    </li>
                    <li><a class="nav-link" href="#faq"><i class="fas fa-question-circle"></i> FAQ</a></li>
                    <li><a class="nav-link" href="#contact"><i class="fas fa-envelope"></i> Contacto</a></li>

                    <!-- Acciones (se quedan a la derecha en desktop y bajan al menú en móvil) -->
                    <li class="nav-actions">
                        <button id="loginBtn" class="btn btn-outline"><i class="fas fa-sign-in-alt"></i> Entrar</button>
                        <button id="registerBtn" class="btn btn-primary"><i class="fas fa-user-plus"></i>
                            Registrarse</button>
                        <button id="logoutBtn" class="btn btn-secondary hidden"><i class="fas fa-sign-out-alt"></i>
                            Cerrar Sesión</button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Vista para usuarios no autenticados -->
    <main id="publicView">
        <!-- Sección Hero -->
        <section class="hero full-width" id="heroSection" tabindex="0">
            <!-- capas de fondo para el carrusel (se controlan desde JS) -->
            <div class="hero-bg hero-bg-a" aria-hidden="true"></div>
            <div class="hero-bg hero-bg-b" aria-hidden="true"></div>

            <!-- Lista de imágenes (oculta) -->
            <div id="heroSlides" class="hero-slides" style="display:none">
                <!-- Reemplaza con tus imágenes reales dentro de assets/ -->
                <img src="assets/centro1.jpg" alt="">
                <img src="assets/centro2.jpg" alt="">
                <img src="assets/centro3.jpg" alt="">
                <img src="assets/centro4.jpg" alt="">
                <img src="assets/centro5.jpg" alt="">
            </div>

            <div class="container">
                <div class="hero-content">
                    <div class="hero-icon">
                        <!-- Usa tu ruta real -->
                        <img src="assets/footer.png" alt="Calendario confirmado">
                    </div>
                    <h1>Centro de salud dedicado a mejorar tu calidad de vida.</h1>
                    <p>Reserva tu cita con nuestros especialistas de forma rápida y sencilla</p>
                    <button style="margin: 0 auto;" id="publicLoginBtn" class="btn btn-primary btn-large">
                        <i class="fas fa-calendar-alt"></i> Reservar Cita
                    </button>
                </div>
                <div class="hero-features">
                    <div class="feature">
                        <i class="fas fa-clock"></i>
                        <h3>Horarios Flexibles</h3>
                        <p>Elige el horario que mejor se adapte a tu rutina</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-bell"></i>
                        <h3>Recordatorios</h3>
                        <p>Recibe notificaciones de tu cita por correo</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-user-md"></i>
                        <h3>Profesionales Calificados</h3>
                        <p>Atención personalizada con profesionales certificados</p>
                    </div>
                </div>

                <!-- Controles e indicadores del carrusel -->
                <button id="heroPrev" class="hero-control hero-control--prev" aria-label="Imagen anterior">
                    <i class="fas fa-chevron-left" aria-hidden="true"></i>
                </button>
                <button id="heroNext" class="hero-control hero-control--next" aria-label="Siguiente imagen">
                    <i class="fas fa-chevron-right" aria-hidden="true"></i>
                </button>
                <div id="heroIndicators" class="hero-indicators" aria-hidden="false"></div>
            </div>
        </section>

        <!-- Sección Quiénes Somos (Equipo) -->
        <section class="section full-width" id="about">
            <div class="container">
                <div class="section-header">
                    <h2><i class="fas fa-users"></i> Nuestro Equipo</h2>
                    <p>Conoce a los profesionales que te acompañarán en tu proceso de salud</p>
                </div>

                <!-- Grid de profesionales -->
                <div class="team-grid">
                    <div class="pro-card">
                        <img class="pro-photo" src="assets/barbara.png" alt="Bárbara San Martín" loading="lazy">
                        <div class="pro-body">
                            <h3>Bárbara San Martín</h3>
                            <p class="pro-title">Nutricionista</p>
                            <ul class="pro-services">
                                <li>Control y seguimiento de Peso</li>
                                <li>Nutrición Clínica Especializada</li>
                                <li>Consultas de Seguimiento</li>
                            </ul>
                            <button class="btn btn-primary reserve-btn" data-professional="Bárbara San Martín">
                                <i class="fas fa-calendar-plus"></i> Reservar Cita
                            </button>
                        </div>
                    </div>

                    <div class="pro-card">
                        <img class="pro-photo" src="assets/angela.png" alt="Angela Meza" loading="lazy">
                        <div class="pro-body">
                            <h3>Angela Meza</h3>
                            <p class="pro-title">Matrona</p>
                            <ul class="pro-services">
                                <li>Control y Anticonceptivos</li>
                                <li>Lactancia Materna</li>
                                <li>Orientación y Consejería ITS</li>
                            </ul>
                            <button class="btn btn-primary reserve-btn" data-professional="Angela Meza">
                                <i class="fas fa-calendar-plus"></i> Reservar Cita
                            </button>
                        </div>
                    </div>

                    <div class="pro-card">
                        <img class="pro-photo" src="assets/nancy.png" alt="Nancy Nina" loading="lazy">
                        <div class="pro-body">
                            <h3>Nancy Nina</h3>
                            <p class="pro-title">Medico General</p>
                            <ul class="pro-services">
                                <li>Atención Médica Integral</li>
                                <li>Control de Enfermedades Crónicas</li>
                                <li>Chequeos Generales</li>
                            </ul>
                            <button class="btn btn-primary reserve-btn" data-professional="Nancy Nina">
                                <i class="fas fa-calendar-plus"></i> Reservar Cita
                            </button>
                        </div>
                    </div>

                    <div class="pro-card">
                        <img class="pro-photo" src="assets/fernanda.png" alt="Fernanda Torres" loading="lazy">
                        <div class="pro-body">
                            <h3>Fernanda Torres</h3>
                            <p class="pro-title">Fonoaudiologa</p>
                            <ul class="pro-services">
                                <li>Perfeccionamiento Vocal</li>
                                <li>Trastornos del Lenguaje</li>
                                <li>Patologias especializadas</li>
                            </ul>
                            <button class="btn btn-primary reserve-btn" data-professional="Fernanda Torres">
                                <i class="fas fa-calendar-plus"></i> Reservar Cita
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección Nuestros Servicios -->
        <section class="section full-width" id="process">
            <div class="container">
                <div class="section-header">
                    <h2>Nuestros Servicios</h2>
                    <p>Ofrecemos atención presencial y online, en un espacio cómodo y con un equipo multidisciplinario.</p>
                </div>
                <div class="process-steps services-grid">
                    <div class="step">
                        <div class="step-image">
                            <img src="https://qready.quironprevencion.com/wp-content/uploads/2023/11/telemedicina.jpg" alt="Telemedicina" loading="lazy">
                        </div>
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>Telemedicina</h3>
                            <p>Atenciones online seguras y cómodas para que puedas consultar desde tu casa o trabajo.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-image">
                            <img src="https://images.unsplash.com/photo-1600494448644-50b41080adbd?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8c2FsYSUyMGRlJTIwZXN0YXIlMjBkZSUyMGxhJTIwY2FzYSUyMGRlJTIwY2FtcG98ZW58MHx8MHx8fDA%3D" alt="Espacio acogedor" loading="lazy">
                        </div>
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>Espacio acogedor</h3>
                            <p>Contamos con instalaciones cómodas y privadas pensadas para tu bienestar durante la consulta.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-image">
                            <img src="https://d328k6xhl3lmif.cloudfront.net/images/default-source/default-album/equipos-medicos-036926be07427d4ffaa410f529b328d449.jpg?sfvrsn=de5bf1b4_0" alt="Profesionales calificados" loading="lazy">
                        </div>
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>Profesionales calificados</h3>
                            <p>Equipo multidisciplinario con formación y experiencia para ofrecer una atención integral.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-image">
                            <img src="https://www.expomedhub.com/img/blog/prestacion-servicios-m%C3%A9dicos-10.07.2020%20prestaci%C3%B3n%20de%20servicios%20nueva%20normalidad.jpg" alt="Amplia variedad de servicios" loading="lazy">
                        </div>
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3>Amplia variedad de servicios</h3>
                            <p>Nutrición clínica, control de peso, fonoaudiología, ginecología y más servicios especializados.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección Beneficios -->
        <section class="section full-width bg-light" id="benefits">
            <div class="container">
                <div class="section-header">
                    <h2><i class="fas fa-heart"></i> Beneficios de cuidar tu salud</h2>
                    <p>Con pequeños cambios y seguimiento profesional puedes obtener ventajas que impactan tu vida diaria.</p>
                </div>
                <div class="benefits-grid numbered-benefits">
                    <div class="benefit-card">
                        <div class="benefit-image">
                            <img src="assets/beneficio1.jpeg"
                                alt="Prevención" loading="lazy">
                        </div>
                        <h3>1. Prevención de enfermedades crónicas</h3>
                        <p>Detecta y reduce factores de riesgo para enfermedades como diabetes, hipertensión y problemas cardiometabólicos.</p>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-image">
                            <img src="assets/beneficio2.jpeg"
                                alt="Mejor rendimiento" loading="lazy">
                        </div>
                        <h3>2. Mejor rendimiento en tus actividades diarias</h3>
                        <p>Aumenta tu energía, concentración y resistencia para rendir mejor en el trabajo, estudio y deporte.</p>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-image">
                            <img src="assets/beneficio3.jpeg"
                                alt="Salud física y mental" loading="lazy">
                        </div>
                        <h3>3. Salud física y mental</h3>
                        <p>Un enfoque integral mejora tanto el cuerpo como la mente: mejor sueño, ánimo y bienestar general.</p>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-image">
                            <img src="assets/beneficio4.jpeg"
                                alt="Confianza" loading="lazy">
                        </div>
                        <h3>4. Confianza y seguridad en ti mismo</h3>
                        <p>Sentirte mejor físicamente y conseguir tus objetivos genera autoestima y seguridad en tus decisiones.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección Testimonios
        <section class="section full-width" id="testimonials">
            <div class="container">
                <div class="section-header">
                    <h2><i class="fas fa-comment-dots"></i> Testimonios</h2>
                    <p>Lo que dicen nuestros pacientes sobre nosotros</p>
                </div>
                <div class="testimonials-slider">
                    <div class="testimonial-card">
                        <div class="testimonial-header">
                            <img class="testimonial-avatar"
                                src="https://pymstatic.com/10311/conversions/personas-orgullosas-small-16_9.jpg"
                                alt="Foto de María González" loading="lazy">
                            <div>
                                <h4>María González</h4>
                                <p>Paciente desde 2022</p>
                            </div>
                        </div>
                        <div class="testimonial-content">
                            <p>"Gracias a Carpediem he logrado cambiar mis hábitos alimenticios y he perdido 15 kg de
                                forma
                                saludable. ¡Me siento increíble!"</p>
                        </div>
                    </div>

                    <div class="testimonial-card">
                        <div class="testimonial-header">
                            <img class="testimonial-avatar"
                                src="https://plus.unsplash.com/premium_photo-1689568158814-3b8e9c1a9618?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8JTIzcGVyc29uYXxlbnwwfHwwfHx8MA%3D%3D"
                                alt="Foto de Carlos Rodríguez" loading="lazy">
                            <div>
                                <h4>Carlos Rodríguez</h4>
                                <p>Paciente desde 2021</p>
                            </div>
                        </div>
                        <div class="testimonial-content">
                            <p>"El equipo de nutricionistas es excelente. Me ayudaron a controlar mi diabetes con un
                                plan
                                alimenticio que se adapta a mi vida."</p>
                        </div>
                    </div>

                    <div class="testimonial-card">
                        <div class="testimonial-header">
                            <img class="testimonial-avatar"
                                src="https://img.freepik.com/fotos-premium/personas-mujeres-negocios-concepto-retrato-cara-mujer-joven-sonriente-feliz_380164-121867.jpg"
                                alt="Foto de Ana Martínez" loading="lazy">
                            <div>
                                <h4>Ana Martínez</h4>
                                <p>Paciente desde 2023</p>
                            </div>
                        </div>
                        <div class="testimonial-content">
                            <p>"Como deportista, necesitaba optimizar mi alimentación. Con su ayuda he mejorado mi
                                rendimiento y recuperación significativamente."</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section full-width bg-light" id="faq">
            <div class="container">
                <div class="section-header">
                    <h2><i class="fas fa-question-circle"></i> Preguntas Frecuentes</h2>
                    <p>Resolvemos tus dudas sobre nuestros servicios</p>
                </div>
                <div class="faq-content">
                    <div class="faq-image">
                        <img src="https://www.fem.es/wp-content/uploads/2020/03/10-_preguntas-frecuentes-coronavirus-esclerosis-multiple.jpeg"
                            alt="Preguntas frecuentes" loading="lazy">
                    </div>
                    <div class="faq-container">
                        <div class="faq-item">
                            <div class="faq-question">
                                <h3>¿Cuánto dura una consulta nutricional?</h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>La primera consulta tiene una duración aproximada de 60 minutos. Las consultas de
                                    seguimiento duran entre 30 y 45 minutos.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question">
                                <h3>¿Necesito algún examen médico antes de la consulta?</h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>No es obligatorio, pero si cuentas con exámenes de laboratorio recientes, pueden ser
                                    de
                                    gran ayuda para una evaluación más completa.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question">
                                <h3>¿Ofrecen planes de alimentación personalizados?</h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>Sí, todos nuestros planes son completamente personalizados según tus necesidades,
                                    preferencias alimentarias y objetivos específicos.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question">
                                <h3>¿Trabajan con seguros médicos?</h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>Actualmente no trabajamos directamente con seguros médicos, pero proporcionamos
                                    facturas
                                    que puedes presentar para reembolso según tu póliza.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section> -->

        <!-- Sección Contacto -->
        <section class="section full-width" id="contact">
            <div class="container">
                <div class="section-header">
                    <h2><i class="fas fa-envelope"></i> Contacto</h2>
                    <p>Ponte en contacto con nosotros para cualquier consulta</p>
                </div>
                <div class="contact-content">
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <div>
                                <h4>Dirección</h4>
                                <p>Enmanuel 1540, Chillan</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <div>
                                <h4>Teléfono</h4>
                                <p>+56 9 4245 0414</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <div>
                                <h4>Email</h4>
                                <p>contacto.saludcarpediem@gmail.cl</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-clock"></i>
                            <div>
                                <h4>Horario de Atención</h4>
                                <p>Lunes a Viernes: 9:00 - 18:00</p>
                                <p>Sábados: 9:00 - 13:00</p>
                            </div>
                        </div>
                    </div>
                    <div class="contact-form">
                        <form id="contactForm">
                            <div class="form-group">
                                <label for="contactName">Nombre:</label>
                                <input type="text" id="contactName" required placeholder="Tu nombre completo">
                            </div>
                            <div class="form-group">
                                <label for="contactEmail">Email:</label>
                                <input type="email" id="contactEmail" required placeholder="tu@email.com">
                            </div>
                            <div class="form-group">
                                <label for="contactSubject">Asunto:</label>
                                <input type="text" id="contactSubject" required placeholder="Asunto de tu mensaje">
                            </div>
                            <div class="form-group">
                                <label for="contactMessage">Mensaje:</label>
                                <textarea id="contactMessage" rows="3" required
                                    placeholder="Escribe tu mensaje aquí..."></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary" style="margin-left:auto; display:block;">
                                <i class="fas fa-paper-plane"></i> Enviar Mensaje
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Vista para pacientes -->
    <main id="patientView" class="container hidden">
        <div class="patient-header">
            <div class="page-header">
                <h2><i class="fas fa-calendar-alt"></i> Mis Reservas</h2>
                <p>Gestiona tus citas programadas con la nutricionista</p>
            </div>
            <div class="patient-welcome">
                <div class="welcome-card">
                    <div class="welcome-content">
                        <h3>¡Hola de nuevo!</h3>
                        <p>Esperamos que estés teniendo un excelente día. Aquí puedes gestionar todas tus citas y ver tu
                            historial.</p>
                    </div>
                    <div class="welcome-image">
                        <img src="assets/favicon.png" alt="Bienvenida paciente" loading="lazy">
                    </div>
                    <div class="welcome-actions">
                        <button id="newAppointmentBtnPatient" class="btn btn-primary">
                            <i class="fas fa-plus-circle"></i> Solicitar Nueva Cita
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="action-bar">
            <div class="action-filters">
                <button class="filter-btn active" data-filter="all">Todas</button>
                <button class="filter-btn" data-filter="pending">Pendientes</button>
                <button class="filter-btn" data-filter="confirmed">Confirmadas</button>
                <button class="filter-btn" data-filter="cancelled">Canceladas</button>
            </div>
        </div>

        <div id="patientAppointments" class="appointments-list">
            <div class="loading-state">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Cargando tus citas...</p>
            </div>
        </div>
    </main>

    <!-- Vista para administrador -->
    <main id="adminView" class="container hidden">
        <div class="page-header">
            <h2><i class="fas fa-tachometer-alt"></i> Panel de Administración</h2>
            <p>Gestiona reservas, horarios y configuraciones del sistema</p>
        </div>

        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="appointments">
                <i class="fas fa-calendar-check"></i> Reservas
            </button>
            <button class="tab-btn" data-tab="schedule">
                <i class="fas fa-clock"></i> Horario
            </button>
            <button class="tab-btn" data-tab="exceptions">
                <i class="fas fa-exclamation-circle"></i> Excepciones
            </button>
        </div>

        <div id="appointmentsTab" class="tab-content active">
            <div class="tab-header">
                <h3><i class="fas fa-list"></i> Reservas</h3>
                <div class="tab-actions">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Buscar reservas...">
                    </div>
                    <button id="newAppointmentBtnAdmin" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Nueva cita
                    </button>
                </div>
            </div>

            <!-- Nuevo layout -->
            <div class="appointments-layout">
                <!-- Calendario -->
                <aside class="calendar-card">
                    <div class="calendar-header">
                        <button class="cal-nav" id="calPrev" aria-label="Mes anterior"><i
                                class="fas fa-chevron-left"></i></button>
                        <div class="cal-title" id="calTitle">Mes Año</div>
                        <button class="cal-nav" id="calNext" aria-label="Mes siguiente"><i
                                class="fas fa-chevron-right"></i></button>
                    </div>
                    <div class="calendar-weekdays">
                        <span>L</span><span>M</span><span>X</span><span>J</span><span>V</span><span>S</span><span>D</span>
                    </div>
                    <div class="calendar-grid" id="calendarGrid"><!-- días dinámicos --></div>
                    <div class="calendar-footer">
                        <span id="calSelectedLabel">Selecciona un día</span>
                        <span class="chip" id="calDayCount">0 reservas</span>
                    </div>
                </aside>

                <!-- Lista de reservas del día seleccionado -->
                <section class="appointments-column">
                    <div id="adminAppointments" class="appointments-list">
                        <div class="loading-state">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Cargando reservas...</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <div id="scheduleTab" class="tab-content">
            <div class="tab-header">
                <h3><i class="fas fa-cog"></i> Configurar Horario de Atención</h3>
            </div>
            <div class="schedule-config">
                <div class="config-card">
                    <h4><i class="fas fa-stopwatch"></i> Duración de Sesiones</h4>
                    <div class="form-group-inline">
                        <div class="input-with-icon">
                            <i class="fas fa-clock"></i>
                            <input type="number" id="sessionDuration" min="15" step="15" value="60">
                        </div>
                        <span>minutos</span>
                        <button id="saveDurationBtn" class="btn btn-primary">
                            <i class="fas fa-save"></i> Guardar
                        </button>
                    </div>
                </div>

                <div class="config-card">
                    <h4><i class="fas fa-calendar-week"></i> Horario Semanal</h4>
                    <div class="form-group">
                        <label for="scheduleProfessional"><i class="fas fa-user-md"></i> Profesional</label>
                        <select id="scheduleProfessional">
                            <option value="">Horario por defecto (general)</option>
                        </select>
                    </div>
                    <div style="display:flex;gap:12px;align-items:center;margin-bottom:12px;">
                        <button id="loadScheduleBtn" class="btn btn-outline">Cargar horario</button>
                        <button id="saveScheduleBtn" class="btn btn-primary">Guardar horario</button>
                        <small style="color:var(--text-gray);">Selecciona un profesional para gestionar su agenda</small>
                    </div>
                    <div id="weeklySchedule" class="weekly-schedule">
                        <div class="loading-state">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Cargando horarios...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="exceptionsTab" class="tab-content">
            <div class="tab-header">
                <h3><i class="fas fa-calendar-times"></i> Excepciones de Horario</h3>
                <button id="addExceptionBtn" class="btn btn-primary">
                    <i class="fas fa-plus"></i> Agregar Excepción
                </button>
            </div>
            <div id="exceptionsList" class="exceptions-list">
                <div class="loading-state">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Cargando excepciones...</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="logo-container">
                        <img src="assets/footer.png" alt="Carpediem Logo" class="logo-img">
                    </div><br>
                    <p>Tu salud es nuestra prioridad. Ofrecemos servicios de nutrición personalizados para ayudarte a
                        alcanzar tus objetivos de bienestar.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Enlaces Rápidos</h4>
                    <ul>
                        <li><a href="#about">Quiénes Somos</a></li>
                        <li><a href="#services">Servicios</a></li>
                        <li><a href="#process">Proceso</a></li>
                        <li><a href="#contact">Contacto</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Servicios</h4>
                    <ul>
                        <li><a href="#">Control de Peso</a></li>
                        <li><a href="#">Nutrición Clínica</a></li>
                        <li><a href="#">Nutrición Deportiva</a></li>
                        <li><a href="#">Nutrición Pediátrica</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <ul>
                        <li><i class="fas fa-map-marker-alt"></i> Enmanuel 1540, Chillán</li>
                        <li><i class="fas fa-phone"></i> +56 9 4245 0414</li>
                        <li><i class="fas fa-envelope"></i> contacto.saludcarpediem</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Carpediem. Todos los derechos reservados. Desarrollado por Equipo Ntek</p>
            </div>
        </div>
    </footer>

    <!-- Modal de Login -->
    <div id="loginModal" class="modal hidden modal--auth">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-sign-in-alt"></i> Iniciar Sesión</h2>
                <span class="close">&times;</span>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="email"><i class="fas fa-envelope"></i> Email:</label>
                    <input type="email" id="loginEmail" required placeholder="tu@email.com">
                </div>
                <div class="form-group">
                    <label for="password"><i class="fas fa-lock"></i> Contraseña:</label>
                    <input type="password" id="loginPassword" required placeholder="Ingresa tu contraseña">
                </div>
                <button type="submit" class="btn btn-primary btn-full">
                    <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
                </button>
            </form>
            <p id="loginMessage" class="message"></p>
        </div>
    </div>

    <!-- Modal de Registro -->
    <div id="registerModal" class="modal hidden modal--auth">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-user-plus"></i> Registrarse</h2>
                <span class="close">&times;</span>
            </div>
            <form id="registerForm">
                <div class="form-group">
                    <label for="name"><i class="fas fa-user"></i> Nombre:</label>
                    <input type="text" id="registerName" required placeholder="Tu nombre completo">
                </div>
                <div class="form-group">
                    <label for="email"><i class="fas fa-envelope"></i> Email:</label>
                    <input type="email" id="registerEmail" required placeholder="tu@email.com">
                </div>
                <div class="form-group">
                    <label for="phone"><i class="fas fa-phone"></i> Teléfono:</label>
                    <input type="tel" id="registerPhone" required placeholder="+56 9 1234 5678">
                </div>
                <div class="form-group">
                    <label for="password"><i class="fas fa-lock"></i> Contraseña:</label>
                    <input type="password" id="registerPassword" required placeholder="Crea una contraseña segura">
                </div>
                <button type="submit" class="btn btn-primary btn-full">
                    <i class="fas fa-user-plus"></i> Registrarse
                </button>
            </form>
            <p id="registerMessage" class="message"></p>
        </div>
    </div>

    <!-- Modal de Nueva Cita -->
    <div id="appointmentModal" class="modal hidden modal--auth">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-calendar-plus"></i> Solicitar Nueva Cita</h2>
                <span class="close">&times;</span>
            </div>
            <form id="appointmentForm">
                <!-- Solo admin: seleccionar paciente -->
                <div id="adminPatientGroup" class="form-group hidden">
                    <label for="appointmentPatient"><i class="fas fa-user"></i> Paciente</label>
                    <select id="appointmentPatient">
                        <option value="">Selecciona un paciente...</option>
                        <!-- opciones se cargan por JS -->
                    </select>
                </div>

                <!-- Solo admin: estado de la cita -->
                <div id="adminStatusGroup" class="form-group hidden">
                    <label for="appointmentStatus"><i class="fas fa-flag"></i> Estado</label>
                    <select id="appointmentStatus">
                        <option value="pending" selected>Pendiente</option>
                        <option value="confirmed">Confirmada</option>
                        <option value="cancelled">Cancelada</option>
                    </select>
                </div>

                <!-- Seleccionar profesional -->
                <div class="form-group">
                    <label for="appointmentProfessional"><i class="fas fa-user-md"></i> Profesional</label>
                    <select id="appointmentProfessional">
                        <option value="">Cargando profesionales...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="appointmentDate"><i class="fas fa-calendar-day"></i> Fecha:</label>
                    <input type="date" id="appointmentDate" required>
                </div>
                <div class="form-group">
                    <label for="appointmentTime"><i class="fas fa-clock"></i> Hora:</label>
                    <select id="appointmentTime" required>
                        <option value="">Selecciona una hora</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="appointmentNotes"><i class="fas fa-sticky-note"></i> Notas (opcional):</label>
                    <textarea id="appointmentNotes" rows="3"
                        placeholder="Agrega cualquier información adicional que consideres importante..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary btn-full">
                    <i class="fas fa-calendar-check"></i> Solicitar Cita
                </button>
            </form>
            <p id="appointmentMessage" class="message"></p>
        </div>
    </div>

    <!-- Modal de Excepción -->
    <div id="exceptionModal" class="modal hidden modal--auth">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-calendar-times"></i> Agregar Excepción de Horario</h2>
                <span class="close">&times;</span>
            </div>
            <form id="exceptionForm">
                <div class="form-group">
                    <label for="exceptionDate"><i class="fas fa-calendar-day"></i> Fecha:</label>
                    <input type="date" id="exceptionDate" required>
                </div>
                <div class="form-group">
                    <label for="exceptionType"><i class="fas fa-exclamation-circle"></i> Tipo:</label>
                    <select id="exceptionType" required>
                        <option value="closed">Día sin atención</option>
                        <option value="modified">Horario modificado</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="exceptionProfessional"><i class="fas fa-user-md"></i> Profesional (opcional):</label>
                    <select id="exceptionProfessional">
                        <option value="">General (todos los profesionales)</option>
                    </select>
                </div>
                <div id="modifiedHours" class="form-group hidden">
                    <label><i class="fas fa-clock"></i> Horario modificado:</label>
                    <div class="time-inputs">
                        <input type="time" id="exceptionStartTime">
                        <span class="time-separator">a</span>
                        <input type="time" id="exceptionEndTime">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exceptionReason"><i class="fas fa-comment"></i> Razón:</label>
                    <input type="text" id="exceptionReason" required placeholder="Motivo de la excepción">
                </div>
                <button type="submit" class="btn btn-primary btn-full">
                    <i class="fas fa-plus-circle"></i> Agregar Excepción
                </button>
            </form>
            <p id="exceptionMessage" class="message"></p>
        </div>
    </div>

    <!-- Modal de Confirmación -->
    <div id="confirmationModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-check-circle"></i> Confirmación</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="confirmation-icon">
                    <i class="fas fa-check"></i>
                </div>
                <p id="confirmationMessage"></p>
            </div>
            <div class="modal-footer">
                <button id="confirmationOk" class="btn btn-primary btn-full">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- Botón flotante WhatsApp -->
    <a id="whatsappFAB" class="fab-whatsapp"
        href="https://wa.me/56942450414?text=Hola%20quisiera%20hacer%20una%20reserva" target="_blank" rel="noopener"
        aria-label="Chatear por WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script type="module" src="app.js"></script>
</body>

</html>